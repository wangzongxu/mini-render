!function(e,t){var i="object"==typeof window?window:global;"function"==typeof i.define?define(t):"object"==typeof i.module&&module.exports?module.exports=t():i.miniRender=t()}(0,function(){function e(){this.startFlag="{{",this.endFlag="}}",this.commentsReg=/<!--[\s\S]*?-->/g,this.flagTrimReg=/\{\{\s*?(\S(\s*\S+)*?)\s*?\}\}/g,this.ifReg=/^\s*IF\s+/,this.endIfReg=/^\s*\/IF\s*$/,this.elseIfReg=/^\s*ELSEIF\s+/,this.elseReg=/^\s*ELSE\s*$/,this.eachReg=/^\s*EACH\s+/,this.endEachReg=/^\s*\/EACH\s*$/,this.filterReg=/\s*[^\|]\|[^\|]\s*/,this.filterMap={}}var t={extends:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},isEmpty:function(e){var t=0;return this.each(e,function(){t++}),0===t},is:function(e,t){return new RegExp("\\s"+t+"]").test(Object.prototype.toString.call(e))},each:function(e,t){if(this.is(e,"Array"))for(var i=0;i<e.length;i++)t(e[i],i,e);else{if(!this.is(e,"Object"))throw new Error('"EACH" params must be Array or Object');for(var n in e)e.hasOwnProperty(n)&&t(e[n],n,e)}},decode:function(e){var t={"&lt;":"<","&gt;":">","&nbsp;":" ","&quot;":'"',"&amp;":"&"};return this.each(t,function(t,i){e=e.replace(new RegExp(i,"g"),t)}),e}};return e.prototype={handleSpecialSymbols:function(e){return e.replace(this.commentsReg,"").replace(this.flagTrimReg,this.startFlag+"$1"+this.endFlag).replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\f/g,"\\f").replace(/\v/g,"\\v").trim()},makeVariableSet:function(e){var i=[];return t.each(e,function(e,t){i.push(t)}),i},replaceVariable:function(e,i){return t.each(i,function(t){var i=new RegExp("(^|[^.\"'w])("+t+")([^\"'w]|$)","g");e=e.replace(i,"$1__MINI_RENDER__.$2$3")}),e},filter:function(e,t){this.filterMap[e]=t},removeFilter:function(e){delete this.filterMap[e]},renderString:function(e,i){return t.is(e,"String")?i?this.render(e,i)(i):e:""},renderElement:function(e,t){var i=document.querySelector(e);if(!i)return"";if(!t)return!1;var n=this.render(i.innerHTML,t);return i.innerHTML=n(t),!0},render:function(e,i){var n=(e=this.handleSpecialSymbols(e)).split(this.startFlag),r=this.makeVariableSet(i),s='var output = "";';s+="var tools = {",t.each(t,function(e,t){s+=t+":"+e+","}),s+="};",s+="var filters = {",t.isEmpty(this.filterMap)||t.each(this.filterMap,function(e,t){s+=t+": "+e+","}),s+="};";for(var l=0;l<n.length;l++){var a,o,f=n[l].split(this.endFlag);if(f.length>1?(a=f[0],o=f[1]):o=f[0],a)if(a=t.decode(a),a=this.replaceVariable(a,r),this.ifReg.test(a))a=a.replace(this.ifReg,""),s+="if ("+a+") {";else if(this.elseIfReg.test(a))a=a.replace(this.elseIfReg,""),s+="} else if ("+a+") {";else if(this.elseReg.test(a))s+="} else {";else if(this.endIfReg.test(a))s+="}";else if(this.eachReg.test(a)){if(1===(u=(a=a.replace(this.eachReg,"")).split(/\s+IN\s+/)).length)throw new Error('can not found keyword "IN"');var h,c=u[0].split(/\s*(?:ï¼Œ|,)\s*/),g="";a=u[1],1===c.length?h=c:(h=c[0],g=", "+c[1]),s+="tools.each("+a+", function("+h+g+") {"}else if(this.endEachReg.test(a))s+="});";else{if(this.filterReg.test(a)){if(2!==a.split("|").length)throw new Error("Filter used incorrectly");var u=a.split(/\s*\|\s*/),d=u[1];a=u[0],s+="var handleCoding = "+a+";",d&&(s+='if (filters["'+d+'"]) {',s+='   handleCoding = filters["'+d+'"](handleCoding)',s+="}")}else s+="var handleCoding = "+a+";";s+='if (tools.is(handleCoding, "Array") || tools.is(handleCoding, "Object")) {',s+="   output += JSON.stringify(handleCoding)",s+='} else if (tools.is(handleCoding, "Null") || tools.is(handleCoding, "Undefined")) {',s+='   output += ""',s+="} else {",s+="   output += (handleCoding)",s+="}"}s+="output +='"+o+"';"}return s+="return output",new Function("__MINI_RENDER__",s)}},new e});